(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{292:function(t,s,a){"use strict";a.r(s);var e=a(28),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#react-中的-refs"}},[t._v("React 中的 refs")])]),a("li",[a("a",{attrs:{href:"#react-useref-和-react-createref-自定义对象-current-的区别？"}},[t._v("React.useRef() 和 React.createRef()/自定义对象{current: ...}的区别？")])]),a("li",[a("a",{attrs:{href:"#在-webpack-体系中，通常会使用-html-webpack-plugin-插件管理-html-模版，那么如何在-jsx-tsx-中动态修改-html-头部呢？"}},[t._v("在 webpack 体系中，通常会使用 html-webpack-plugin 插件管理 html 模版，那么如何在 jsx/tsx 中动态修改 html 头部呢？")])]),a("li",[a("a",{attrs:{href:"#如何在-js-ts-文件中控制弹框，比如在-axios-的拦截器中弹异常框？"}},[t._v("如何在 js/ts 文件中控制弹框，比如在 axios 的拦截器中弹异常框？")])]),a("li",[a("a",{attrs:{href:"#react-suspense-的实现"}},[t._v("React.Suspense 的实现")])]),a("li",[a("a",{attrs:{href:"#static-getderivedstatefromprops-的应用"}},[t._v("static getDerivedStateFromProps()的应用")])]),a("li",[a("a",{attrs:{href:"#getsnapshotbeforeupdate-的应用"}},[t._v("getSnapshotBeforeUpdate()的应用")])]),a("li",[a("a",{attrs:{href:"#componentdidmount-中-setstate-发生的重绘不再触发-componentdidmount-？"}},[t._v("componentDidMount()中 setState()发生的重绘不再触发 componentDidMount()？")])]),a("li",[a("a",{attrs:{href:"#如何获取孙子组件的-ref"}},[t._v("如何获取孙子组件的 ref")])]),a("li",[a("a",{attrs:{href:"#react-memo-和-shouldcomponentupdate-的应用"}},[t._v("React.memo 和 shouldComponentUpdate 的应用")])]),a("li",[a("a",{attrs:{href:"#usememo-的应用"}},[t._v("useMemo 的应用")])]),a("li",[a("a",{attrs:{href:"#usecallback-的应用"}},[t._v("useCallback 的应用")])]),a("li",[a("a",{attrs:{href:"#对比-usememo-和-usecallback"}},[t._v("对比 useMemo 和 useCallback")])]),a("li",[a("a",{attrs:{href:"#对比-usestate-和-usereducer"}},[t._v("对比 useState 和 useReducer")])]),a("li",[a("a",{attrs:{href:"#react-是如何判断一个组件需要重绘的"}},[t._v("React 是如何判断一个组件需要重绘的")])]),a("li",[a("a",{attrs:{href:"#useeffect-中的-setinterval-无法获取最新-state-问题"}},[t._v("useEffect 中的 setInterval 无法获取最新 state 问题")])]),a("li",[a("a",{attrs:{href:"#解决竞态问题"}},[t._v("解决竞态问题")])]),a("li",[a("a",{attrs:{href:"#reactdom-unstable-batchedupdates"}},[t._v("ReactDOM.unstable_batchedUpdates")])]),a("li",[a("a",{attrs:{href:"#如何在-vscode-中以单元测试为入口调试源码"}},[t._v("如何在 vscode 中以单元测试为入口调试源码")])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"react-中的-refs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-中的-refs"}},[t._v("#")]),t._v(" React 中的 refs")]),t._v(" "),a("p",[t._v("支持两种方式：")]),t._v(" "),a("ol",[a("li",[t._v("React.creatRef()或者 useRef()，两者都返回"),a("code",[t._v("{current:...}")]),t._v("对象")]),t._v(" "),a("li",[a("code",[t._v("(element) => void")]),t._v("回调函数")]),t._v(" "),a("li",[t._v("字符串的使用方式会在未来的版本中去除，不推荐使用")])]),t._v(" "),a("h2",{attrs:{id:"react-useref-和-react-createref-自定义对象-current-的区别？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-useref-和-react-createref-自定义对象-current-的区别？"}},[t._v("#")]),t._v(" React.useRef() 和 React.createRef()/自定义对象"),a("code",[t._v("{current: ...}")]),t._v("的区别？")]),t._v(" "),a("p",[t._v("React.useRef() 每次都会返回相同的引用，而 React.createRef 每次渲染都会返回一个新的引用"),a("br"),t._v("\n下面例子可以更直观看出两者差异：")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createRef "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Test")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("renderIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setRenderIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" refFromUseRef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" refFromCreateRef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("refFromUseRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    refFromUseRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" renderIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("refFromCreateRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    refFromCreateRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" renderIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("renderIndex: ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("renderIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("refFromUseRef: ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("refFromUseRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("refFromCreateRef: ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("refFromCreateRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRenderIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prev")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" prev "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("rerender")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"在-webpack-体系中，通常会使用-html-webpack-plugin-插件管理-html-模版，那么如何在-jsx-tsx-中动态修改-html-头部呢？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-webpack-体系中，通常会使用-html-webpack-plugin-插件管理-html-模版，那么如何在-jsx-tsx-中动态修改-html-头部呢？"}},[t._v("#")]),t._v(" 在 webpack 体系中，通常会使用 html-webpack-plugin 插件管理 html 模版，那么如何在 jsx/tsx 中动态修改 html 头部呢？")]),t._v(" "),a("p",[t._v("使用 react-helmet 组件")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Helmet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-helmet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Helmet")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("hello")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("description"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Helmet")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"如何在-js-ts-文件中控制弹框，比如在-axios-的拦截器中弹异常框？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何在-js-ts-文件中控制弹框，比如在-axios-的拦截器中弹异常框？"}},[t._v("#")]),t._v(" 如何在 js/ts 文件中控制弹框，比如在 axios 的拦截器中弹异常框？")]),t._v(" "),a("p",[t._v("可以参考 antd 中 Notification 组件的做法，在拦截器中调用")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" notification "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"antd"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnotification"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Notification 组件实际是对 "),a("a",{attrs:{href:"https://github.com/react-component/notification/blob/master/src/Notification.tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("rc-notification"),a("OutboundLink")],1),t._v(" 组件的包装，rc-notification 内部会在 newInstance 时调用 "),a("code",[t._v("ReactDOM.render(<Notification />, rootNode)")]),t._v("将弹框加入组件树中;")]),t._v(" "),a("h2",{attrs:{id:"react-suspense-的实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-suspense-的实现"}},[t._v("#")]),t._v(" React.Suspense 的实现")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://codepen.io/Justable/pen/PrbVXb",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Suspense 的子组件异常 throw promise -> Suspense componentDidCatch -> error resolved -> Suspence setState rerender -> 子组件 rerender -> 子组件显示数据")]),t._v(" "),a("h2",{attrs:{id:"static-getderivedstatefromprops-的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#static-getderivedstatefromprops-的应用"}},[t._v("#")]),t._v(" static getDerivedStateFromProps()的应用")]),t._v(" "),a("p",[t._v("当一个组件需要根据传入的 props 来更新内部 state 时，可以使用该方法")]),t._v(" "),a("h2",{attrs:{id:"getsnapshotbeforeupdate-的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getsnapshotbeforeupdate-的应用"}},[t._v("#")]),t._v(" getSnapshotBeforeUpdate()的应用")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://codepen.io/Justable/pen/QXKXzR",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"componentdidmount-中-setstate-发生的重绘不再触发-componentdidmount-？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#componentdidmount-中-setstate-发生的重绘不再触发-componentdidmount-？"}},[t._v("#")]),t._v(" componentDidMount()中 setState()发生的重绘不再触发 componentDidMount()？")]),t._v(" "),a("p",[t._v("是的，之后改为触发 componentDidUpdate()")]),t._v(" "),a("h2",{attrs:{id:"如何获取孙子组件的-ref"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何获取孙子组件的-ref"}},[t._v("#")]),t._v(" 如何获取孙子组件的 ref")]),t._v(" "),a("h2",{attrs:{id:"react-memo-和-shouldcomponentupdate-的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-memo-和-shouldcomponentupdate-的应用"}},[t._v("#")]),t._v(" React.memo 和 shouldComponentUpdate 的应用")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://codepen.io/Justable/pen/LYYjJJN",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"usememo-的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usememo-的应用"}},[t._v("#")]),t._v(" useMemo 的应用")]),t._v(" "),a("p",[t._v("useMemo 会缓存函数的返回结果\n"),a("a",{attrs:{href:"https://codepen.io/Justable/pen/zgmXZY",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"usecallback-的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usecallback-的应用"}},[t._v("#")]),t._v(" useCallback 的应用")]),t._v(" "),a("p",[t._v("useCallback 会缓存函数")]),t._v(" "),a("h2",{attrs:{id:"对比-usememo-和-usecallback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对比-usememo-和-usecallback"}},[t._v("#")]),t._v(" 对比 useMemo 和 useCallback")]),t._v(" "),a("p",[t._v("useCallback(fn, deps) 相当于 useMemo(() => fn, deps)")]),t._v(" "),a("h2",{attrs:{id:"对比-usestate-和-usereducer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对比-usestate-和-usereducer"}},[t._v("#")]),t._v(" 对比 useState 和 useReducer")]),t._v(" "),a("p",[t._v("多状态时用 useReducer 更利于维护，并且会合并更新")]),t._v(" "),a("h2",{attrs:{id:"react-是如何判断一个组件需要重绘的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-是如何判断一个组件需要重绘的"}},[t._v("#")]),t._v(" React 是如何判断一个组件需要重绘的")]),t._v(" "),a("p",[t._v("显式的 setState，props 改变，父组件重绘（如果并没有影响到子组件的 state 和 props，则不会重绘）")]),t._v(" "),a("h2",{attrs:{id:"useeffect-中的-setinterval-无法获取最新-state-问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useeffect-中的-setinterval-无法获取最新-state-问题"}},[t._v("#")]),t._v(" useEffect 中的 setInterval 无法获取最新 state 问题")]),t._v(" "),a("p",[t._v("主要由闭包导致，可以参考 "),a("code",[t._v("react-use")]),t._v(" 中的 useInterval\n"),a("a",{attrs:{href:"https://codepen.io/Justable/pen/oNNbOWg",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"解决竞态问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决竞态问题"}},[t._v("#")]),t._v(" 解决竞态问题")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://codepen.io/Justable/pen/wvvzEav",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"reactdom-unstable-batchedupdates"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactdom-unstable-batchedupdates"}},[t._v("#")]),t._v(" ReactDOM.unstable_batchedUpdates")]),t._v(" "),a("p",[t._v("通常多个 setState 会被合并成一个之后执行协调和提交阶段，但是在 setTimeout、Promise.then 中的 setState 会立即执行协调和提交阶段，此时可以借助 ReactDOM.unstable_batchedUpdates 进行合并")]),t._v(" "),a("h2",{attrs:{id:"如何在-vscode-中以单元测试为入口调试源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何在-vscode-中以单元测试为入口调试源码"}},[t._v("#")]),t._v(" 如何在 vscode 中以单元测试为入口调试源码")]),t._v(" "),a("p",[t._v("创建如下的 launch.json 文件")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.1.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"configurations"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"request"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"launch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Jest Entry"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"program"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${workspaceRoot}/node_modules/.bin/jest"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"args"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${file}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--config"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./scripts/jest/config.source.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--runInBand"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"console"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integratedTerminal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"internalConsoleOptions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"neverOpen"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"NODE_ENV"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"development"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);