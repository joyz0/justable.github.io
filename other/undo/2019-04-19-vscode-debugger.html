<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>听鱼的博客</title>
    <meta name="description" content="随便玩玩">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/assets/css/0.styles.341cfc29.css" as="style"><link rel="preload" href="/assets/js/app.834fa262.js" as="script"><link rel="preload" href="/assets/js/2.84bd1770.js" as="script"><link rel="preload" href="/assets/js/65.e3f4df5e.js" as="script"><link rel="prefetch" href="/assets/js/10.fa8f6067.js"><link rel="prefetch" href="/assets/js/11.9f8679a1.js"><link rel="prefetch" href="/assets/js/12.d3ea1352.js"><link rel="prefetch" href="/assets/js/13.d644964f.js"><link rel="prefetch" href="/assets/js/14.08d46626.js"><link rel="prefetch" href="/assets/js/15.cc0cdb90.js"><link rel="prefetch" href="/assets/js/16.221ad8e1.js"><link rel="prefetch" href="/assets/js/17.5cecd835.js"><link rel="prefetch" href="/assets/js/18.83a02a3c.js"><link rel="prefetch" href="/assets/js/19.7094958f.js"><link rel="prefetch" href="/assets/js/20.e0901aa1.js"><link rel="prefetch" href="/assets/js/21.2b39ecda.js"><link rel="prefetch" href="/assets/js/22.c37897ad.js"><link rel="prefetch" href="/assets/js/23.0437ba9a.js"><link rel="prefetch" href="/assets/js/24.aff07b57.js"><link rel="prefetch" href="/assets/js/25.9f59e895.js"><link rel="prefetch" href="/assets/js/26.bc3e7188.js"><link rel="prefetch" href="/assets/js/27.f1566baf.js"><link rel="prefetch" href="/assets/js/28.f3b2414a.js"><link rel="prefetch" href="/assets/js/29.c63eb8b9.js"><link rel="prefetch" href="/assets/js/3.b1b3f99c.js"><link rel="prefetch" href="/assets/js/30.0400351a.js"><link rel="prefetch" href="/assets/js/31.5988a2a2.js"><link rel="prefetch" href="/assets/js/32.9d181cf4.js"><link rel="prefetch" href="/assets/js/33.63c7d762.js"><link rel="prefetch" href="/assets/js/34.ffff15f0.js"><link rel="prefetch" href="/assets/js/35.7faa2db4.js"><link rel="prefetch" href="/assets/js/36.cc0b4a37.js"><link rel="prefetch" href="/assets/js/37.605892ae.js"><link rel="prefetch" href="/assets/js/38.a62e1e63.js"><link rel="prefetch" href="/assets/js/39.e85363f3.js"><link rel="prefetch" href="/assets/js/4.1d24c653.js"><link rel="prefetch" href="/assets/js/40.4f293368.js"><link rel="prefetch" href="/assets/js/41.4926fd0f.js"><link rel="prefetch" href="/assets/js/42.826b66b4.js"><link rel="prefetch" href="/assets/js/43.c6e3e7e8.js"><link rel="prefetch" href="/assets/js/44.2b9068c2.js"><link rel="prefetch" href="/assets/js/45.a80a811f.js"><link rel="prefetch" href="/assets/js/46.706ec366.js"><link rel="prefetch" href="/assets/js/47.d814052d.js"><link rel="prefetch" href="/assets/js/48.769d64a4.js"><link rel="prefetch" href="/assets/js/49.bd4c174b.js"><link rel="prefetch" href="/assets/js/5.a97c8d86.js"><link rel="prefetch" href="/assets/js/50.4f60df2d.js"><link rel="prefetch" href="/assets/js/51.e801bdbd.js"><link rel="prefetch" href="/assets/js/52.0ef611af.js"><link rel="prefetch" href="/assets/js/53.a0a5df00.js"><link rel="prefetch" href="/assets/js/54.405f5094.js"><link rel="prefetch" href="/assets/js/55.3e84d901.js"><link rel="prefetch" href="/assets/js/56.e7c38286.js"><link rel="prefetch" href="/assets/js/57.023fac89.js"><link rel="prefetch" href="/assets/js/58.1267c545.js"><link rel="prefetch" href="/assets/js/59.bf90ef57.js"><link rel="prefetch" href="/assets/js/6.a99d29a3.js"><link rel="prefetch" href="/assets/js/60.6fab7692.js"><link rel="prefetch" href="/assets/js/61.ce84444f.js"><link rel="prefetch" href="/assets/js/62.2fedc562.js"><link rel="prefetch" href="/assets/js/63.92d3ae7f.js"><link rel="prefetch" href="/assets/js/64.c196b412.js"><link rel="prefetch" href="/assets/js/66.6d444dc3.js"><link rel="prefetch" href="/assets/js/67.e91d5c4e.js"><link rel="prefetch" href="/assets/js/68.ed776120.js"><link rel="prefetch" href="/assets/js/69.66c0306e.js"><link rel="prefetch" href="/assets/js/7.62c62b65.js"><link rel="prefetch" href="/assets/js/70.60b1b5da.js"><link rel="prefetch" href="/assets/js/71.6e7565c7.js"><link rel="prefetch" href="/assets/js/72.a89da3d9.js"><link rel="prefetch" href="/assets/js/73.01d4e43b.js"><link rel="prefetch" href="/assets/js/74.bad1b85b.js"><link rel="prefetch" href="/assets/js/75.a622463c.js"><link rel="prefetch" href="/assets/js/76.e35bbcff.js"><link rel="prefetch" href="/assets/js/77.fd02b49e.js"><link rel="prefetch" href="/assets/js/78.ae4ab8e6.js"><link rel="prefetch" href="/assets/js/79.1a589e84.js"><link rel="prefetch" href="/assets/js/8.ae6fa5af.js"><link rel="prefetch" href="/assets/js/80.5c035f13.js"><link rel="prefetch" href="/assets/js/81.ab9a2687.js"><link rel="prefetch" href="/assets/js/82.28fb49c8.js"><link rel="prefetch" href="/assets/js/83.4574356c.js"><link rel="prefetch" href="/assets/js/84.088206fc.js"><link rel="prefetch" href="/assets/js/85.f16da4b1.js"><link rel="prefetch" href="/assets/js/9.d3eb4fce.js">
    <link rel="stylesheet" href="/assets/css/0.styles.341cfc29.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">听鱼的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/article/浅谈JS中的AST.html" class="nav-link">
  文章
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/html5/BrowsingContext.html" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/basic/css3/flex.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/basic/javascript/closure.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basic/nodejs/常用NPM包索引.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/basic/typescript/basic.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/basic/browser/cors.html" class="nav-link">
  Browser
</a></li><li class="dropdown-item"><!----> <a href="/basic/webpack/webpack4.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/basic/react/react-kernel.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/basic/vue/vue-loader.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/basic/minip/FAQ.html" class="nav-link">
  Minip
</a></li><li class="dropdown-item"><!----> <a href="/basic/network/TCPIP.html" class="nav-link">
  Network
</a></li><li class="dropdown-item"><!----> <a href="/basic/git/command.html" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/justable/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/article/浅谈JS中的AST.html" class="nav-link">
  文章
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/html5/BrowsingContext.html" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/basic/css3/flex.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/basic/javascript/closure.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/basic/nodejs/常用NPM包索引.html" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/basic/typescript/basic.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/basic/browser/cors.html" class="nav-link">
  Browser
</a></li><li class="dropdown-item"><!----> <a href="/basic/webpack/webpack4.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/basic/react/react-kernel.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/basic/vue/vue-loader.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/basic/minip/FAQ.html" class="nav-link">
  Minip
</a></li><li class="dropdown-item"><!----> <a href="/basic/network/TCPIP.html" class="nav-link">
  Network
</a></li><li class="dropdown-item"><!----> <a href="/basic/git/command.html" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/justable/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>下面探讨的都是基于 node。</p></blockquote> <p>VSCode 的 debugger 遵循 wire protocols，目前有两种 wire protocols 存在</p> <ol><li>legacy</li> <li>inspector （通过--inspect 开启）</li></ol> <p>VSCode 默认 auto，即根据当前 node 版本来判断。</p> <h3 id="launch-configuration-attributes"><a href="#launch-configuration-attributes" class="header-anchor">#</a> Launch configuration attributes</h3> <p>VSCode 的 debugger 程序基于.idea 文件夹下的配置文件 launch.json</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">common</span> <span class="token punctuation">{</span>
  <span class="token comment">// 环境类型，比如node</span>
  <span class="token keyword">type</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// debug方式</span>
  request<span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;attach&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 给debugger取个名字</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// 遵循协议</span>
  protocol<span class="token operator">:</span> <span class="token string">&quot;auto&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;inspector&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;legacy&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// debug port</span>
  port<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">// TCP/IP address of the debug port</span>
  address<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// enable source maps by setting this to true</span>
  sourceMaps<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token comment">// array of glob patterns for locating generated JavaScript files</span>
  outFiles<span class="token operator">:</span> array<span class="token punctuation">;</span>
  <span class="token comment">// restart session on termination</span>
  restart<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  autoAttachChildProcesses<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token comment">// when restarting a session, give up after this number of milliseconds</span>
  timeout<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">// 断点会停在第一行，break immediately when the program launches</span>
  stopOnEntry<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token comment">// VS Code's root directory</span>
  localRoot<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// Node's root directory</span>
  remoteRoot<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// try to automatically step over code that doesn't map to source files</span>
  smartStep<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token comment">// automatically skip files covered by these glob patterns</span>
  skipFiles<span class="token operator">:</span> array<span class="token punctuation">;</span>
  <span class="token comment">// enable diagnostic output</span>
  trace<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">launch</span> <span class="token punctuation">{</span>
  <span class="token comment">// an absolute path to the Node.js program to debug</span>
  program<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// arguments passed to the program to debug</span>
  args<span class="token operator">:</span> array<span class="token punctuation">;</span>
  <span class="token comment">// launch the program to debug in this directory</span>
  cwd<span class="token operator">:</span> <span class="token string">&quot;${workspaceFolder}&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// absolute path to the runtime executable to be used. Default is node</span>
  runtimeExecutable<span class="token operator">:</span> <span class="token string">&quot;node&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;npm&quot;</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// optional arguments passed to the runtime executable</span>
  runtimeArgs<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// select a specific version of Node.js</span>
  runtimeVersion<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// This attribute expects environment variables as a list of string typed key/value pairs</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// optional path to a file containing environment variable definitions</span>
  envFile<span class="token operator">:</span> <span class="token string">&quot;${workspaceFolder}/.env&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// kind of console to launch the program</span>
  <span class="token builtin">console</span><span class="token operator">:</span> <span class="token string">&quot;internalConsole&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;integratedTerminal&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;externalTerminal&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// This is useful for programs or log libraries that write directly to the stdout/stderr streams instead of using console.* APIs</span>
  outputCapture<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">// 在lanuch前执行指定任务</span>
  preLaunchTask<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">attach</span> <span class="token punctuation">{</span>
  <span class="token comment">// the debugger tries to attach to this process after having sent a USR1 signal, conflict with port</span>
  processId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h3 id="launch-vs-attach"><a href="#launch-vs-attach" class="header-anchor">#</a> Launch vs Attach</h3> <p>launch 是指把 debug sessions 附加到接下来直接启动的 node 调试程序（即跟随--inspect-brk=port），注意 debug port 得和--inspect-brk=port 对应；<br>
attach 是指把 debug sessions 附加到指定的正在运行的处于 debug 模式的 node 程序的对应端口上，如果是非 debug 模式的 node 程序，则需要提供 processId。</p> <h3 id="node-console"><a href="#node-console" class="header-anchor">#</a> Node Console</h3> <p>默认下，Node.js debug sessions 是启动在 Debug Console 中的，因为 Debug Console 不支持用户输入，所以我们可以指定一个外部 terminal 或用 VS Code 内部集成的 terminal。<br>
如果要指定一个外部 terminal，那么需要配置 terminal.external.windowsExec，terminal.external.osxExec， and terminal.external.linuxExec。</p> <h3 id="launch-configuration-support-for-npm-and-other-tools"><a href="#launch-configuration-support-for-npm-and-other-tools" class="header-anchor">#</a> Launch configuration support for 'npm' and other tools</h3> <p>下面 3 个是等价的</p> <h4 id="example-1"><a href="#example-1" class="header-anchor">#</a> Example 1</h4> <ol><li>node --inspect-brk program</li> <li>start debug session</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// launch.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Launch Program&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;program&quot;</span><span class="token operator">:</span> <span class="token string">&quot;${workspaceFolder}/app.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="example-2"><a href="#example-2" class="header-anchor">#</a> Example 2</h4> <ol><li>npm run-script debug</li> <li>start debug session</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;debug&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node --inspect-brk ./app.js&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">// launch.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Launch via NPM&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;runtimeExecutable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;runtimeArgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;run-script&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;debug&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">9229</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="example-3"><a href="#example-3" class="header-anchor">#</a> Example 3</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;调试 TS Node 程序 - args&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;runtimeExecutable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;${workspaceFolder}/src/app.js&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="example-4"><a href="#example-4" class="header-anchor">#</a> Example 4</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;调试 TS Node 程序 - preTask&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;program&quot;</span><span class="token operator">:</span> <span class="token string">&quot;${workspaceFolder}/out/app.js&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 在 launch 调试之前先执行一个任务</span>
  <span class="token string">&quot;preLaunchTask&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc_build&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_5"><a href="#_5" class="header-anchor">#</a> 5</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Attach to node&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;attach&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;processId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;${command:PickProcess}&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="node-inspect-vs-node-inspect-brk"><a href="#node-inspect-vs-node-inspect-brk" class="header-anchor">#</a> node --inspect vs node --inspect-brk</h3> <p>inspect 是 node 的调试模式，前者表示开启 node 调试模式，当我们不需要调试主程序时可以选择此模式，比如调试监听事件的回掉函数；后者表示开启 node 调试模式，并且在主程序开始处等待，当我们需要调试主程序时可以选择此模式。<br>
node --inspect-brk 执行后，打开 chrome://inspect/#devices，在 Remote Target 中点击对应的 inspect 即可开始调试。</p> <h3 id="自动-debug"><a href="#自动-debug" class="header-anchor">#</a> 自动 debug</h3> <p>VS Code 可以在当 node program 时自动进入 debug 模式</p> <h3 id="source-maps"><a href="#source-maps" class="header-anchor">#</a> Source maps</h3> <p>假如我们想要调试 TS 源码，我们把断点打在 TS 文件中，运行程序后就会进入断点，可是程序运行的代码肯定是编译后的 JS 文件，是怎么进入 TS 文件的断点呢？这就是 source maps 的功劳，debug adapter 借助 source maps 解析 JS 文件，与 TS 文件建立起位置关系，这样最终运行的文件也有了断点信息，当程序运行到某个断点时，重新映射到 TS 文件中。VS Code 默认会开启 source maps。如果编译后的文件不在同级目录，则需要设置 outFiles attribute 告知 debug adpater 源文件在哪。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.2.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Launch TypeScript&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;program&quot;</span><span class="token operator">:</span> <span class="token string">&quot;app.ts&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;outFiles&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;${workspaceFolder}/bin/**/*.js&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="占位符"><a href="#占位符" class="header-anchor">#</a> 占位符</h3> <ul><li>${workspaceFolder} - the path of the folder opened in VS Code</li> <li>${workspaceFolderBasename} - the name of the folder opened in VS Code without any slashes (/)</li> <li>${file} - the current opened file</li> <li>${relativeFile} - the current opened file relative to workspaceFolder</li> <li>${fileBasename} - the current opened file's basename</li> <li>${fileBasenameNoExtension} - the current opened file's basename with no file extension</li> <li>${fileDirname} - the current opened file's dirname</li> <li>${fileExtname} - the current opened file's extension</li> <li>${cwd} - the task runner's current working directory on startup</li> <li>${lineNumber} - the current selected line number in the active file</li> <li>${selectedText} - the current selected text in the active file</li> <li>${execPath} - the path to the running VS Code executable</li> <li>${env:Name} - environment variables</li> <li>${config:Name} - configuration variables</li> <li>${command:commandID} - command variables</li> <li>${input:variableID} - input variables</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.834fa262.js" defer></script><script src="/assets/js/2.84bd1770.js" defer></script><script src="/assets/js/65.e3f4df5e.js" defer></script>
  </body>
</html>
